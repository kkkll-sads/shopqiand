<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>数权中心</title>
  <style>::-webkit-scrollbar{display:none;width:0!important;height:0!important}*{scrollbar-width:none;-ms-overflow-style:none}body{-webkit-tap-highlight-color:transparent;overscroll-behavior-y:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-user-select:none;user-select:none;-webkit-touch-callout:none;background-color:#f3f4f6;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji!important}input,textarea,[contenteditable=true]{-webkit-user-select:text;user-select:text;-webkit-touch-callout:default}body.certificate-page{-webkit-user-select:none;user-select:none;-webkit-touch-callout:none;touch-action:pan-x pan-y;-ms-touch-action:pan-x pan-y}body.certificate-page *{touch-action:manipulation}body.certificate-page html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;text-size-adjust:100%}body.certificate-page input,body.certificate-page textarea{-webkit-user-select:text;user-select:text}.pb-safe{padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}</style>
  <script type="module" crossorigin src="/assets/index-BBblop7u.js"></script>
  <link rel="modulepreload" crossorigin href="/assets/vendor-D_9m6sOW.js">
  <link rel="modulepreload" crossorigin href="/assets/state-vendor-B4qtn465.js">
  <link rel="modulepreload" crossorigin href="/assets/react-vendor-DqXzi926.js">
  <link rel="stylesheet" crossorigin href="/assets/index-Cu2A3Cn2.css">
  <script type="module">import.meta.url;import("_").catch(()=>1);(async function*(){})().next();if(location.protocol!="file:"){window.__vite_is_modern_browser=true}</script>
  <script type="module">!function(){if(window.__vite_is_modern_browser)return;console.warn("vite: loading legacy chunks, syntax error above and the same error below should be ignored");var e=document.getElementById("vite-legacy-polyfill"),n=document.createElement("script");n.src=e.src,n.onload=function(){System.import(document.getElementById('vite-legacy-entry').getAttribute('data-src'))},document.body.appendChild(n)}();</script>
</head>

<body>
  <div id="root"></div>
  <script>
    // 全局错误处理：捕获 browser API 未定义的错误（通常来自浏览器扩展或第三方脚本）
    window.addEventListener('error', function(event) {
      // 忽略来自第三方脚本的 browser API 错误
      if (event.message && (
        event.message.includes('browser is not defined') ||
        event.message.includes('chrome is not defined') ||
        event.filename && (
          event.filename.includes('myContent.js') ||
          event.filename.includes('pagehelper.js') ||
          event.filename.includes('content_script')
        )
      )) {
        console.warn('[全局错误处理] 捕获到浏览器扩展/第三方脚本错误:', event.filename || event.message);
        event.preventDefault();
        return true;
      }
    }, true);

    // 捕获未处理的 Promise 拒绝
    window.addEventListener('unhandledrejection', function(event) {
      if (event.reason && event.reason.message && (
        event.reason.message.includes('browser is not defined') ||
        event.reason.message.includes('chrome is not defined')
      )) {
        console.warn('[全局错误处理] 捕获到未处理的 Promise 拒绝（浏览器扩展）:', event.reason);
        event.preventDefault();
      }
    });

    // ========================================
    // 证书页面专用限制（通过检测 body.certificate-page 类激活）
    // ========================================
    
    function isCertificatePage() {
      return document.body.classList.contains('certificate-page');
    }

    // 禁用右键菜单（仅证书页面）
    document.addEventListener('contextmenu', function (e) {
      if (isCertificatePage()) {
        e.preventDefault();
        return false;
      }
    }, false);

    // 禁用长按菜单和选择文本（仅证书页面）
    let touchStartTime = 0;
    document.addEventListener('touchstart', function (e) {
      if (!isCertificatePage()) return;
      // 禁用多点触控
      if (e.touches.length > 1 && e.cancelable) {
        e.preventDefault();
      }
      touchStartTime = Date.now();
    }, { passive: false });

    // 禁用双击缩放（仅证书页面）
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (e) {
      if (!isCertificatePage()) return;
      const now = Date.now();
      const touchDuration = now - touchStartTime;

      // 检查事件是否可取消（滚动进行中时 cancelable 为 false）
      if (now - lastTouchEnd <= 300 && e.cancelable) {
        e.preventDefault();
        lastTouchEnd = now;
        return false;
      }
      lastTouchEnd = now;

      if (touchDuration > 500 && e.cancelable) {
        e.preventDefault();
        if (window.getSelection) {
          window.getSelection().removeAllRanges();
        }
      }
    }, { passive: false });

    // 禁用手势缩放（仅证书页面）
    document.addEventListener('gesturestart', function (e) {
      if (isCertificatePage() && e.cancelable) {
        e.preventDefault();
        return false;
      }
    }, false);

    document.addEventListener('gesturechange', function (e) {
      if (isCertificatePage() && e.cancelable) {
        e.preventDefault();
        return false;
      }
    }, false);

    document.addEventListener('gestureend', function (e) {
      if (isCertificatePage() && e.cancelable) {
        e.preventDefault();
        return false;
      }
    }, false);

    // 禁用选择文本（仅证书页面，输入框除外）
    document.addEventListener('selectstart', function (e) {
      if (!isCertificatePage()) return;
      const target = e.target;
      if (target && (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA')) {
        return true;
      }
      e.preventDefault();
      return false;
    }, false);

    // 禁用拖拽（仅证书页面）
    document.addEventListener('dragstart', function (e) {
      if (isCertificatePage()) {
        e.preventDefault();
        return false;
      }
    }, false);
  </script>
  <script nomodule>!function(){var e=document,t=e.createElement("script");if(!("noModule"in t)&&"onbeforeload"in t){var n=!1;e.addEventListener("beforeload",(function(e){if(e.target===t)n=!0;else if(!e.target.hasAttribute("nomodule")||!n)return;e.preventDefault()}),!0),t.type="module",t.src=".",e.head.appendChild(t),t.remove()}}();</script>
  <script nomodule crossorigin id="vite-legacy-polyfill" src="/assets/polyfills-legacy-DyIGb-c1.js"></script>
  <script nomodule crossorigin id="vite-legacy-entry" data-src="/assets/index-legacy-DV_RdoZv.js">System.import(document.getElementById('vite-legacy-entry').getAttribute('data-src'))</script>
</body>

</html>