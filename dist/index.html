<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>数权中心</title>
  <style>
    /* Hide scrollbar globally for a native app feel */
    ::-webkit-scrollbar {
      display: none;
      width: 0 !important;
      height: 0 !important;
    }

    /* Hide scrollbar for Firefox */
    * {
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    body {
      background-color: #f3f4f6;
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior-y: none;
      /* 使用固定字体栈 */
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !important;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* ========================================
       证书页面专用限制样式 (通过 .certificate-page 类激活)
       ======================================== */
    
    /* 证书页面：禁用文本选择 */
    body.certificate-page {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
      touch-action: pan-x pan-y;
      -ms-touch-action: pan-x pan-y;
    }

    /* 证书页面：禁用双击缩放 */
    body.certificate-page * {
      touch-action: manipulation;
    }

    /* 证书页面：禁用手势缩放 */
    body.certificate-page html {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }

    /* 证书页面中的输入框仍允许选择 */
    body.certificate-page input,
    body.certificate-page textarea {
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }

    /* Custom utility for safe area bottom padding (iPhone X+) */
    .pb-safe {
      padding-bottom: constant(safe-area-inset-bottom);
      /* iOS 11.0 */
      padding-bottom: env(safe-area-inset-bottom);
      /* iOS 11.2 */
    }
  </style>
  <link rel="stylesheet" href="/index.css">
  <script type="module" crossorigin src="/assets/index-Ed0P5GR6.js"></script>
  <link rel="modulepreload" crossorigin href="/assets/vendor-DYxmgbLw.js">
  <link rel="modulepreload" crossorigin href="/assets/react-vendor-CwaJB02W.js">
  <link rel="modulepreload" crossorigin href="/assets/area-data-BVDNhPol.js">
  <link rel="stylesheet" crossorigin href="/assets/index-BxOakjz0.css">
</head>

<body>
  <div id="root"></div>
  <script>
    // 全局错误处理：捕获 browser API 未定义的错误（通常来自浏览器扩展或第三方脚本）
    window.addEventListener('error', function(event) {
      // 忽略来自第三方脚本的 browser API 错误
      if (event.message && (
        event.message.includes('browser is not defined') ||
        event.message.includes('chrome is not defined') ||
        event.filename && (
          event.filename.includes('myContent.js') ||
          event.filename.includes('pagehelper.js') ||
          event.filename.includes('content_script')
        )
      )) {
        console.warn('[全局错误处理] 捕获到浏览器扩展/第三方脚本错误:', event.filename || event.message);
        event.preventDefault();
        return true;
      }
    }, true);

    // 捕获未处理的 Promise 拒绝
    window.addEventListener('unhandledrejection', function(event) {
      if (event.reason && event.reason.message && (
        event.reason.message.includes('browser is not defined') ||
        event.reason.message.includes('chrome is not defined')
      )) {
        console.warn('[全局错误处理] 捕获到未处理的 Promise 拒绝（浏览器扩展）:', event.reason);
        event.preventDefault();
      }
    });

    // ========================================
    // 证书页面专用限制（通过检测 body.certificate-page 类激活）
    // ========================================
    
    function isCertificatePage() {
      return document.body.classList.contains('certificate-page');
    }

    // 禁用右键菜单（仅证书页面）
    document.addEventListener('contextmenu', function (e) {
      if (isCertificatePage()) {
        e.preventDefault();
        return false;
      }
    }, false);

    // 禁用长按菜单和选择文本（仅证书页面）
    let touchStartTime = 0;
    document.addEventListener('touchstart', function (e) {
      if (!isCertificatePage()) return;
      // 禁用多点触控
      if (e.touches.length > 1 && e.cancelable) {
        e.preventDefault();
      }
      touchStartTime = Date.now();
    }, { passive: false });

    // 禁用双击缩放（仅证书页面）
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (e) {
      if (!isCertificatePage()) return;
      const now = Date.now();
      const touchDuration = now - touchStartTime;

      // 检查事件是否可取消（滚动进行中时 cancelable 为 false）
      if (now - lastTouchEnd <= 300 && e.cancelable) {
        e.preventDefault();
        lastTouchEnd = now;
        return false;
      }
      lastTouchEnd = now;

      if (touchDuration > 500 && e.cancelable) {
        e.preventDefault();
        if (window.getSelection) {
          window.getSelection().removeAllRanges();
        }
      }
    }, { passive: false });

    // 禁用手势缩放（仅证书页面）
    document.addEventListener('gesturestart', function (e) {
      if (isCertificatePage() && e.cancelable) {
        e.preventDefault();
        return false;
      }
    }, false);

    document.addEventListener('gesturechange', function (e) {
      if (isCertificatePage() && e.cancelable) {
        e.preventDefault();
        return false;
      }
    }, false);

    document.addEventListener('gestureend', function (e) {
      if (isCertificatePage() && e.cancelable) {
        e.preventDefault();
        return false;
      }
    }, false);

    // 禁用选择文本（仅证书页面，输入框除外）
    document.addEventListener('selectstart', function (e) {
      if (!isCertificatePage()) return;
      const target = e.target;
      if (target && (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA')) {
        return true;
      }
      e.preventDefault();
      return false;
    }, false);

    // 禁用拖拽（仅证书页面）
    document.addEventListener('dragstart', function (e) {
      if (isCertificatePage()) {
        e.preventDefault();
        return false;
      }
    }, false);
  </script>
</body>

</html>