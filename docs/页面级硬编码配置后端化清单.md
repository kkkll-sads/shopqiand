# 页面级硬编码配置后端化清单

> 版本: v1.0  
> 更新时间: 2026-02-09  
> 目标: 将前端页面中的业务配置/运营数据由“写死”改为“后端可配置”

## 说明

- 本文按“页面/路由”梳理。
- 重点覆盖业务配置、状态映射、金额规则、运营文案，不包含纯样式常量。
- 已存在的总体方案可参考: `/Users/a0000/shopqiand/docs/前端硬编码接口清单.md`。本文件是“页面视角”补充。

## 优先级

- `P0`: 直接影响业务策略或易引发线上错误，优先后端化
- `P1`: 高频维护项，建议本期落地
- `P2`: 体验优化项，可排期处理

## 1. 首页 `/`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/cms/Home.tsx:224`
- `/Users/a0000/shopqiand/src/pages/cms/Home.tsx:169`
- `/Users/a0000/shopqiand/src/pages/cms/Home.tsx:417`

当前写死项:
- 快捷入口 `quickActions`（名称、图标、路由、颜色）
- 首页申购预览条数 `limit: 3`
- 申购状态徽章映射（待撮合/已中签/未中签）
- 交易专区卡片标题和副标题文案

建议后端化:
- `GET /api/cms/home-config`
- 字段建议:
  - `quick_actions[] { key,title,icon,route,is_visible,style }`
  - `reservation_preview { limit, status_badges[] }`
  - `trading_zone_card { title, subtitle, route }`

优先级: `P0`

## 2. 客服入口（主布局+在线客服）

涉及文件:
- `/Users/a0000/shopqiand/src/components/common/ChatWidget.tsx:20`
- `/Users/a0000/shopqiand/src/components/common/ChatWidget.tsx:21`
- `/Users/a0000/shopqiand/src/components/common/ChatWidget.tsx:164`

当前写死项:
- `CHANNEL_ID`
- 客服主/备域名数组 `CHAT_PAGE_BASE_URLS`
- widget 脚本地址 `https://chat.bskhu.cn/chat/widget.js`

建议后端化:
- `GET /api/cms/customer-service-config`
- 字段建议:
  - `channel_id`
  - `widget_script_url`
  - `chat_urls[]`
  - `degrade_strategy`（降级策略）

优先级: `P0`

## 3. 交易专区 `/trading-zone`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/market/utils/poolConfig.ts:7`
- `/Users/a0000/shopqiand/src/pages/market/utils/poolConfig.ts:62`
- `/Users/a0000/shopqiand/src/pages/market/TradingZone.tsx:75`

当前写死项:
- 资产池主题预设 `POOL_THEME_PRESETS`（编号、名称、ROI、额度、颜色、图标）
- 通过时段判断池类型（`morning/afternoon/evening`）
- 交易须知通过标题关键字“交易须知”匹配

建议后端化:
- 扩展 `GET /api/collectionSession/index` 返回主题与运营字段
- 新增 `GET /api/cms/trading-config`
- 字段建议:
  - `session_theme { code,sub_name,roi_text,quota_text,theme }`
  - `time_strategy`（场次与主题映射）
  - `notice_match_rule`（公告匹配规则）

优先级: `P0`

## 4. 市场页 `/market`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/market/Market.tsx:24`
- `/Users/a0000/shopqiand/src/pages/market/Market.tsx:167`
- `/Users/a0000/shopqiand/src/pages/market/Market.tsx:171`
- `/Users/a0000/shopqiand/src/pages/market/Market.tsx:389`
- `/Users/a0000/shopqiand/src/pages/market/Market.tsx:456`

当前写死项:
- 分页大小 `PAGE_SIZE = 10`
- 分类图标映射规则（按分类名硬编码）
- 顶部筛选 Tab（综合/价格/销量/最新）
- Top/新品角标规则（按 index 判断）

建议后端化:
- `GET /api/shop/page-config`
- 字段建议:
  - `page_size`
  - `filter_tabs[]`
  - `category_display[] { category,icon,badge }`
  - `badge_rules { top_count,new_range }`

优先级: `P1`

## 5. 订单列表 `/orders/:category/:status`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/market/OrderListPage.tsx:51`
- `/Users/a0000/shopqiand/src/pages/market/OrderListPage.tsx:56`
- `/Users/a0000/shopqiand/src/pages/market/hooks/useOrderList.ts:61`
- `/Users/a0000/shopqiand/src/pages/market/hooks/useOrderList.ts:125`
- `/Users/a0000/shopqiand/src/pages/market/hooks/useOrderList.ts:182`

当前写死项:
- 分类标题与 Tab（买入/卖出、待寄售/寄售中/寄售失败等）
- Tab -> 后端查询参数映射（`paid/shipped/completed`、`holding/consigned/failed`）
- 固定 `limit=10`、固定 `pay_type='score'`

建议后端化:
- `GET /api/order/categories`
- 字段建议:
  - `categories[] { key,title,tabs[] }`
  - `tabs[].query_mapping`（状态映射）
  - `tabs[].page_size`

优先级: `P0`

## 6. 申购记录 `/reservation-record`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/market/ReservationRecordPage.tsx:255`
- `/Users/a0000/shopqiand/src/pages/market/ReservationRecordPage.tsx:259`
- `/Users/a0000/shopqiand/src/pages/market/ReservationRecordPage.tsx:335`

当前写死项:
- 状态筛选按钮（全部/待撮合/已撮合/已退款）
- `zoneOptions` 仅“全部分区”
- 排序选项（创建时间/权重/冻结金额）
- 状态徽章样式映射

建议后端化:
- `GET /api/collectionReservation/config`
- 字段建议:
  - `status_filters[]`
  - `zone_filters[]`
  - `sort_options[]`
  - `status_badges[]`

优先级: `P1`

## 7. 撮合池 `/matching-pool`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/market/MatchingPoolPage.tsx:24`
- `/Users/a0000/shopqiand/src/pages/market/MatchingPoolPage.tsx:78`

当前写死项:
- `STATUS_CONFIG`（文案、颜色、图标）
- 固定分页 `limit=20`

建议后端化:
- `GET /api/collectionTrade/matching-config`
- 字段建议:
  - `status_display[]`
  - `page_size`

优先级: `P1`

## 8. 预约页 `/reservation`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/market/ReservationPage.tsx:33`
- `/Users/a0000/shopqiand/src/pages/market/ReservationPage.tsx:59`
- `/Users/a0000/shopqiand/src/pages/market/ReservationPage.tsx:112`

当前写死项:
- 价格分区解析规则 `extractPriceFromZone`
- `fallbackProduct` 默认空商品
- 基础算力 `baseHashrate = 5`

建议后端化:
- 扩展 `GET /api/collectionSession/detail` / `GET /api/collectionItem/detail`
- 字段建议:
  - `zone { id, name, max_price, base_hashrate }`
  - `reservation_rules { min_qty,max_qty,max_extra_hashrate }`

优先级: `P0`

## 9. 算力补充 `/hashrate-exchange`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/wallet/HashrateExchange.tsx:27`
- `/Users/a0000/shopqiand/src/pages/wallet/HashrateExchange.tsx:28`
- `/Users/a0000/shopqiand/src/pages/wallet/HashrateExchange.tsx:142`

当前写死项:
- 兑换比例 `STANDARD_RATE=5`、`SUBSIDIZED_RATE=2`
- 快捷数量 `[10, 50, 100, 500]`

建议后端化:
- `GET /api/score/exchange-config`
- 字段建议:
  - `standard_rate`
  - `subsidized_rate`
  - `quick_amounts[]`
  - `min_amount/max_amount/daily_limit`

优先级: `P0`

## 10. 专项金申购 `/balance-recharge`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/wallet/components/recharge/AmountSelector.tsx:12`
- `/Users/a0000/shopqiand/src/pages/wallet/hooks/useBalanceTransfer.ts:18`
- `/Users/a0000/shopqiand/src/pages/wallet/BalanceRecharge.tsx:226`

当前写死项:
- 充值快捷金额 `QUICK_AMOUNTS`
- 余额划转备注默认值“余额划转”

建议后端化:
- `GET /api/wallet/recharge-config`
- 字段建议:
  - `quick_amounts[]`
  - `transfer_remark_default`
  - `transfer_tips[]`

优先级: `P1`

## 11. 收益提现 `/balance-withdraw`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/wallet/BalanceWithdraw.tsx:108`
- `/Users/a0000/shopqiand/src/pages/wallet/BalanceWithdraw.tsx:195`

当前写死项:
- 手续费率 `feeRate = 0.01`
- 银行卡提现最低金额 `100`

建议后端化:
- `GET /api/wallet/withdraw-config`
- 字段建议:
  - `fee_rate`
  - `min_amount_by_account_type`
  - `max_amount`
  - `withdraw_notice`

优先级: `P0`

## 12. 充值记录 `/recharge-orders`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/wallet/RechargeOrderList.tsx:101`
- `/Users/a0000/shopqiand/src/pages/wallet/RechargeOrderList.tsx:73`

当前写死项:
- 状态 Tab（全部/待审核/已通过/已拒绝）
- 刷新间隔固定 5 秒

建议后端化:
- `GET /api/wallet/recharge-order-config`
- 字段建议:
  - `status_tabs[]`
  - `refresh_interval`
  - `page_size`

优先级: `P1`

## 13. 提现记录 `/withdraw-orders`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/wallet/WithdrawOrderList.tsx:45`
- `/Users/a0000/shopqiand/src/pages/wallet/WithdrawOrderList.tsx:97`
- `/Users/a0000/shopqiand/src/pages/wallet/WithdrawOrderList.tsx:108`

当前写死项:
- 状态 Tab
- 状态颜色与图标映射

建议后端化:
- 复用 `GET /api/common/dict` + `GET /api/wallet/withdraw-order-config`
- 字段建议:
  - `withdraw_status[] { value,label,color,icon }`

优先级: `P1`

## 14. 资产总览 `/asset-view`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/wallet/AssetView.tsx:78`
- `/Users/a0000/shopqiand/src/pages/wallet/components/asset/AssetActionsGrid.tsx:12`

当前写死项:
- 收支筛选选项（全部/支出/收入）
- 资产操作入口（申购专项金/收益提现/算力补充/确权金划转）
- 默认筛选时间（`7days`）

建议后端化:
- `GET /api/wallet/asset-view-config`
- 字段建议:
  - `action_entries[]`
  - `flow_filters[]`
  - `default_filters { time_range }`

优先级: `P1`

## 15. 资产历史 `/asset-history`

涉及文件:
- `/Users/a0000/shopqiand/src/components/common/FilterBar.tsx:60`
- `/Users/a0000/shopqiand/src/constants/balanceTypes.ts:5`
- `/Users/a0000/shopqiand/src/constants/balanceTypes.ts:32`

当前写死项:
- FilterBar 收支/时间筛选选项
- 资金类型标签与选项（`BALANCE_TYPE_LABELS`、`BALANCE_TYPE_OPTIONS`）

建议后端化:
- `GET /api/common/dict?types=balance_types,flow_directions,time_ranges`
- 字段建议:
  - `balance_types[]`
  - `flow_directions[]`
  - `time_ranges[]`

优先级: `P1`

## 16. 权益总览 `/cumulative-rights`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/wallet/CumulativeRights.tsx:110`
- `/Users/a0000/shopqiand/src/pages/wallet/CumulativeRights.tsx:162`
- `/Users/a0000/shopqiand/src/pages/wallet/CumulativeRights.tsx:214`

当前写死项:
- 账户余额项（标题、图标、说明）
- 收益分类项（寄售收益/矿机分红/好友分润等）
- 藏品统计项名称与顺序

建议后端化:
- 扩展 `GET /api/Account/accountOverview`
- 字段建议:
  - `display.balance_cards[]`
  - `display.income_cards[]`
  - `display.collection_stats[]`

优先级: `P1`

## 17. 个人中心 `/profile`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/user/Profile.tsx:220`
- `/Users/a0000/shopqiand/src/pages/user/Profile.tsx:262`
- `/Users/a0000/shopqiand/src/pages/user/Profile.tsx:275`

当前写死项:
- `user_type` 到文案/图标映射（新用户/普通用户/交易用户）
- 代理审核状态展示文案

建议后端化:
- 扩展 `GET /api/User/profile`
- 字段建议:
  - `user_type_meta { label,icon,color }`
  - `agent_review_meta { label,color }`

优先级: `P2`

## 18. 通知设置 `/notification-settings`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/user/NotificationSettings.tsx:32`
- `/Users/a0000/shopqiand/src/pages/user/NotificationSettings.tsx:93`

当前写死项:
- 通知项类型和默认开关（banner/sound/vibration）
- 仅本地存储，不走后端

建议后端化:
- `GET /api/user/notification-config`
- `POST /api/user/notification-settings`
- 字段建议:
  - `items[] { key,label,default_enabled }`

优先级: `P1`

## 19. 账户注销 `/account-deletion`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/user/AccountDeletion.tsx:21`

当前写死项:
- 注销条件 `tips[]` 完全写死

建议后端化:
- `GET /api/user/cancel-rule`
- 字段建议:
  - `tips[]`
  - `warning_text`
  - `agreement_version`

优先级: `P1`

## 20. 直播页 `/live`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/live/LivePage.tsx:63`

当前写死项:
- Tab 定义（直播/回放）

建议后端化:
- `GET /api/live/page-config`
- 字段建议:
  - `tabs[] { id,label,enabled }`

优先级: `P2`

## 21. 签到页 `/sign-in`

涉及文件:
- `/Users/a0000/shopqiand/src/pages/cms/SignIn.tsx:239`
- `/Users/a0000/shopqiand/src/pages/cms/SignIn.tsx:263`

当前写死项:
- 最低提现额兜底值 `10`
- 日历月份文案数组

建议后端化:
- `GET /api/signin/config`
- 字段建议:
  - `withdraw_min_amount`
  - `calendar_locale`（可选）

优先级: `P2`

## 22. 统一状态字典（跨页面）

涉及文件:
- `/Users/a0000/shopqiand/src/constants/statusEnums.ts:18`
- `/Users/a0000/shopqiand/src/constants/statusEnums.ts:442`

当前写死项:
- 各业务状态枚举及中文映射（订单、寄售、提货、实名认证、充值、提现等）

建议后端化:
- `GET /api/common/dict`
- 字段建议:
  - `[{ type, value, label, color, icon, sort }]`

优先级: `P0`

## 23. 旧资产解锁规则（权益中心相关）

涉及文件:
- `/Users/a0000/shopqiand/src/pages/wallet/hooks/useClaimUnlock.ts:44`
- `/Users/a0000/shopqiand/src/pages/wallet/hooks/useClaimUnlock.ts:49`
- `/Users/a0000/shopqiand/src/pages/wallet/hooks/useClaimUnlock.ts:133`

当前写死项:
- 默认值兜底：直推人数 `3`、交易次数 `1`、奖励价值 `1000`
- 成功文案包含奖励值与寄售券数量兜底

建议后端化:
- 扩展 `GET /api/.../checkOldAssetsUnlockStatus`
- 字段建议:
  - `required_referrals`
  - `required_transactions`
  - `reward_value`
  - `success_message_template`

优先级: `P0`

## 建议实施顺序

1. `P0` 先落地: 客服配置、交易专区主题、订单分类映射、兑换/提现规则、状态字典、旧资产解锁规则。
2. `P1` 第二批: 首页配置、申购记录筛选、资产页操作配置、通知设置、充值/提现记录配置。
3. `P2` 最后处理: Profile 展示映射、直播页 tab、签到页文案兜底。

## 验收标准

- 前端不再依赖页面内硬编码业务字典（状态/金额规则/入口配置）。
- 运营可通过后端配置调整，不发版即可生效。
- 所有配置接口返回版本号/更新时间，前端支持缓存与回滚。
- 当配置接口异常时，前端仅保留最小兜底，不影响主流程下单/支付/提现。
